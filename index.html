<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Project Stable Console</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet" />
    <style>
      body {
        margin: 0;
        padding: 0;
        background-color: #0d1117;
        color: #00ff99;
        font-family: 'Press Start 2P', cursive;
        text-align: center;
        overflow-y: auto;
        height: 100vh;
      }

      h1 {
        margin-top: 60px;
        font-size: 20px;
      }

      p {
        font-size: 10px;
        color: #7fffd4;
        margin-bottom: 40px;
      }

      button {
        font-family: 'Press Start 2P', cursive;
        background-color: #00ff99;
        color: #0d1117;
        border: 2px solid #00ff99;  /* Pixel-style border */
        padding: 20px;
        margin: 10px auto;
        display: block;
        font-size: 12px;
        cursor: pointer;
        border-radius: 4px;
        box-shadow: 0 0 5px #00ff99;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
        width: 80%;
      }

      button:hover {
        transform: scale(1.1);
        box-shadow: 0 0 10px #00ff99;
      }

      #hud {
        padding: 40px;
        border: 2px solid #00ff99; /* Pixel-style border */
        border-radius: 8px;
        max-width: 600px;
        margin: 40px auto;
        box-shadow: 0 0 15px #00ff99;
        background-color: rgba(13, 17, 23, 0.85);
        position: relative;
      }

      .page {
        display: none;
      }

      .active {
        display: block;
      }

      .breathing-circle {
        width: 100px;
        height: 100px;
        border-radius: 50%;
        margin: 40px auto;
        background-color: #00ff99;
        animation: breathe 6s ease-in-out infinite;
      }

      @keyframes breathe {
        0% { transform: scale(1); opacity: 0.7; }
        50% { transform: scale(1.5); opacity: 1; }
        100% { transform: scale(1); opacity: 0.7; }
      }

      .panic-message {
        font-size: 14px;
        color: #7fffd4;
        margin-top: 20px;
        font-family: 'Press Start 2P', cursive;
      }

      .record-log {
        margin-top: 20px;
        background-color: rgba(0, 255, 153, 0.2);
        padding: 20px;
        max-height: 300px;
        overflow-y: auto;
        border-radius: 10px;
      }

      .record-log p {
        font-size: 14px;
        line-height: 1.5;
      }

      .grounding-checklist {
        margin: 20px;
        font-size: 14px;
        text-align: left;
        color: #7fffd4;
      }

      .checklist-item {
        margin: 10px 0;
      }

      .settings {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        margin-top: 40px;
      }

      .timer {
        font-size: 20px;
        color: #7fffd4;
        margin-top: 20px;
      }
    </style>
  </head>
  <body>
    <div id="hud">
      <h1>Project Stable Console</h1>

      <!-- Panic Page -->
      <div id="panic-page" class="page active">
        <button onclick="goToPage('log-page')">View Panic Log</button>
        <div class="breathing-circle"></div>
        <button onclick="startTimer()">Start Timer</button>
        <button onclick="goToPage('settings-page')">Settings</button>
      </div>

      <!-- Timer Page -->
      <div id="timer-page" class="page">
        <button onclick="goToPage('panic-page')">Back to Panic Page</button>
        <div class="timer" id="timer-display">Time left: 60</div>
        <button onclick="stopTimer()">Stop Timer</button>
      </div>

      <!-- Panic Log Page -->
      <div id="log-page" class="page">
        <button onclick="goToPage('panic-page')">Back to Panic Page</button>
        <div class="record-log" id="panic-log"></div>
        <p id="panic-counter">Total Panic Button Presses: 0</p>
        <button onclick="resetLog()">Reset Log</button>
      </div>

      <!-- Settings Page -->
      <div id="settings-page" class="page">
        <button onclick="goToPage('panic-page')">Back to Panic Page</button>
        <div class="settings">
          <button onclick="changeTheme('light')">Light Mode</button>
          <button onclick="changeTheme('dark')">Dark Mode</button>
          <button onclick="changeColor('green')">Green</button>
          <button onclick="changeColor('purple')">Purple</button>
          <button onclick="changeColor('blue')">Blue</button>
          <button onclick="changeColor('orange')">Orange</button>
        </div>
      </div>
    </div>

    <script>
      let panicCount = parseInt(localStorage.getItem('panicCount')) || 0;
      let panicLog = JSON.parse(localStorage.getItem('panicLog')) || [];
      let timerInterval;

      function goToPage(page) {
        const pages = document.querySelectorAll('.page');
        pages.forEach(p => p.classList.remove('active'));
        document.getElementById(page).classList.add('active');
        if (page === 'panic-page') recordPanic();
        if (page === 'log-page') updateLogDisplay();
        if (page === 'settings-page') loadTheme();
        if (page === 'timer-page') randomMessage();
      }

      function recordPanic() {
        panicCount++;
        localStorage.setItem('panicCount', panicCount);
        const time = new Date().toLocaleString();
        panicLog.push(time);
        localStorage.setItem('panicLog', JSON.stringify(panicLog));
      }

      function updateLogDisplay() {
        document.getElementById('panic-counter').textContent = panicCount;
        const log = document.getElementById('panic-log');
        log.innerHTML = panicLog.map(time => `<p>${time}</p>`).join('');
      }

      function resetLog() {
        panicCount = 0;
        panicLog = [];
        localStorage.setItem('panicCount', 0);
        localStorage.setItem('panicLog', JSON.stringify([]));
        updateLogDisplay();
      }

      function startTimer() {
        let timer = 60; 
        const timerDisplay = document.getElementById('timer-display');
        timerInterval = setInterval(function() {
          timer--;
          if (timer <= 0) {
            clearInterval(timerInterval);
            timerDisplay.textContent = "Time's up!";
          } else {
            timerDisplay.textContent = `Time left: ${timer}s`;
          }
        }, 1000);
      }

      function stopTimer() {
        clearInterval(timerInterval);
        document.getElementById('timer-display').textContent = "Timer stopped.";
      }

      function randomMessage() {
        const messages = [
          "Stay calm, you are doing great!",
          "Take a deep breath, you are in control.",
          "You’ve got this, breathe slowly.",
          "Relax, everything will be okay.",
          "Focus on your breath, you’re safe here.",
          "I love you, Callan.",
          "Suemin is proud of you.",
          "❤️ You are loved by Suemin.",
        ];
        const msg = messages[Math.floor(Math.random() * messages.length)];
        const el = document.querySelector('.panic-message');
        if (el) el.textContent = msg;
      }

      function changeTheme(theme) {
        if (theme === 'light') {
          document.body.style.backgroundColor = '#ffffff';
          document.body.style.color = '#000000';
        } else {
          document.body.style.backgroundColor = '#0d1117';
          document.body.style.color = localStorage.getItem('color') || '#00ff99';
        }
        localStorage.setItem('theme', theme);
      }

      function changeColor(color) {
        const buttons = document.querySelectorAll('button');
        const colorMap = {
          green: '#00ff99',
          purple: '#a966ff',
          blue: '#66ccff',
          orange: '#ff6600'
        };
        const selected = colorMap[color];
        buttons.forEach(btn => {
          btn.style.backgroundColor = selected;
          btn.style.borderColor = selected;
        });
        localStorage.setItem('color', selected);
      }

      function loadTheme() {
        const theme = localStorage.getItem('theme') || 'dark';
        changeTheme(theme);
        const color = localStorage.getItem('color') || '#00ff99';
        document.body.style.color = color;
        document.querySelectorAll('button').forEach(btn => btn.style.backgroundColor = color);
      }

      window.onload = () => {
        loadTheme();
        updateLogDisplay();
      }
    </script>
  </body>
</html>
