<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Project Stable Console</title>
    <link href="https://fonts.googleapis.com/css2?family=Pixelify+Sans:wght@400;700&display=swap" rel="stylesheet" />
    <style>
      :root {
        --accent: #a5e1c3; /* 부드러운 초록색 */
        --accent-dark: #78c2a8;
        --background: #fffef6; /* 크림색 바탕 */
        --text: #222;
        --hud-bg: #eafaf1;
      }

      body {
        margin: 0;
        padding: 0;
        background-color: var(--background);
        color: var(--text);
        font-family: 'Pixelify Sans', sans-serif;
        text-align: center;
      }

      h1 {
        margin-top: 40px;
        font-size: 24px;
      }

      p {
        font-size: 14px;
        margin-bottom: 20px;
      }

      button {
        font-family: 'Pixelify Sans', sans-serif;
        background-color: var(--accent);
        color: var(--text);
        border: 2px solid var(--accent-dark);
        padding: 15px 20px;
        margin: 10px auto;
        display: block;
        font-size: 14px;
        cursor: pointer;
        border-radius: 0;
        box-shadow: none;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
        width: 80%;
        max-width: 300px;
      }

      button:hover {
        transform: translateY(-2px);
        box-shadow: inset 0 0 0 2px var(--accent-dark);
      }

      #hud {
        padding: 30px;
        border: 2px solid var(--accent-dark);
        border-radius: 0;
        max-width: 600px;
        margin: 40px auto;
        background-color: var(--hud-bg);
        box-shadow: none;
      }

      .page {
        display: none;
      }

      .active {
        display: block;
      }

      .breathing-circle {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        margin: 30px auto;
        background-color: var(--accent);
        animation: breathe 6s ease-in-out infinite;
      }

      @keyframes breathe {
        0% { transform: scale(1); opacity: 0.6; }
        50% { transform: scale(1.5); opacity: 1; }
        100% { transform: scale(1); opacity: 0.6; }
      }

      #timer-display {
        font-size: 18px;
        margin: 10px 0;
        font-weight: bold;
      }

      /* 로딩 바 스타일 */
      .progress-container {
        width: 100%;
        background-color: #f3f3f3;
        border: 2px solid var(--accent-dark);
        border-radius: 5px;
        margin: 10px 0;
        height: 20px;
      }

      .progress-bar {
        height: 100%;
        background-color: var(--accent);
        width: 0;
        border-radius: 5px;
      }

      .record-log {
        background-color: #f3fef6;
        padding: 15px;
        border: 2px solid var(--accent-dark);
        border-radius: 0;
        max-height: 200px;
        overflow-y: auto;
        font-size: 12px;
        margin: 10px auto;
      }

      .audio-button {
        background-color: #ffb6b9;
      }

      .audio-button:hover {
        transform: translateY(-2px);
        box-shadow: inset 0 0 0 2px #ff8b8d;
      }
    </style>
  </head>
  <body>
    <div id="main-page" class="page active">
      <div id="hud">
        <h1>🌿 STABLE CONSOLE 🌿</h1>
        <p>"In the midst of chaos, you are safe here."</p>
        <button onclick="goToPage('breathing-page')">START BREATHING 🌬️</button>
        <button onclick="triggerPanic()">PANIC BUTTON 🚨</button>
        <button onclick="goToPage('log-page')">PANIC LOG 📜</button>
        <button onclick="goToPage('audio-page')">Suemin's Yapp 🎙️</button>
      </div>
    </div>

    <div id="breathing-page" class="page">
      <div id="hud">
        <h1>🫧 BREATHING 🫧</h1>
        <div class="breathing-circle"></div>
        <button onclick="goToPage('main-page')">BACK 🔙</button>
      </div>
    </div>

    <div id="panic-page" class="page">
      <div id="hud">
        <h1>🚨 PANIC MODE 🚨</h1>
        <p id="panic-message">Preparing support message...</p>
        <img id="panic-gif" src="" alt="calming gif" style="max-width: 200px; display: block; margin: 20px auto;">
        <div id="timer-display"></div>

        <!-- 로딩 바 -->
        <div class="progress-container">
          <div class="progress-bar" id="progress-bar"></div>
        </div>

        <button onclick="goToPage('main-page')">BACK 🔙</button>
      </div>
    </div>

    <div id="log-page" class="page">
      <div id="hud">
        <h1>📜 PANIC HISTORY</h1>
        <div id="panic-log" class="record-log"></div>
        <button onclick="clearLog()">RESET LOG ❌</button>
        <button onclick="goToPage('main-page')">BACK 🔙</button>
      </div>
    </div>

    <div id="audio-page" class="page">
      <div id="hud">
        <h1>🎙️ Suemin's Yapp 🎶</h1>
        <p>Select an audio to play:</p>
        <button class="audio-button" onclick="playAudio(1)">Audio 1 🎤</button>
        <button class="audio-button" onclick="playAudio(2)">Audio 2 🎧</button>
        <button class="audio-button" onclick="playAudio(3)">Audio 3 🎶</button>
        <button onclick="goToPage('main-page')">BACK 🔙</button>
      </div>
    </div>

    <script>
      const messages = [
        "You’ve got this 💪",
        "Breathe slowly 🫁",
        "You are not alone 🌟",
        "Let it pass gently 💧",
        "This will end soon ☁️"
      ];

      const gifs = [
        "https://media.giphy.com/media/3o7abldj0b3rxrZUxW/giphy.gif",
        "https://media.giphy.com/media/l0MYt5jPR6QX5pnqM/giphy.gif",
        "https://media.giphy.com/media/l4FGuhL4U2WyjdkaY/giphy.gif"
      ];

      function goToPage(id) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.getElementById(id).classList.add('active');
      }

      function triggerPanic() {
        goToPage('panic-page');
        const message = messages[Math.floor(Math.random() * messages.length)];
        const gif = gifs[Math.floor(Math.random() * gifs.length)];

        document.getElementById('panic-message').textContent = message;
        document.getElementById('panic-gif').src = gif;
        startTimer(60);

        const now = new Date();
        const log = document.getElementById('panic-log');
        const entry = document.createElement('p');
        entry.textContent = `Panic button pressed at ${now.toLocaleString()}`;
        log.appendChild(entry);

        localStorage.setItem('panic-log', log.innerHTML);
      }

      function clearLog() {
        localStorage.removeItem('panic-log');
        document.getElementById('panic-log').innerHTML = '';
      }

      function loadLog() {
        const stored = localStorage.getItem('panic-log');
        if (stored) document.getElementById('panic-log').innerHTML = stored;
      }

      function startTimer(seconds) {
        const display = document.getElementById('timer-display');
        const progressBar = document.getElementById('progress-bar');
        let remaining = seconds;
        display.textContent = `⏱️ ${remaining} seconds`;

        const interval = setInterval(() => {
          remaining--;
          display.textContent = `⏱️ ${remaining} seconds`;
          const percentage = (1 - remaining / seconds) * 100;
          progressBar.style.width = `${percentage}%`;

          if (remaining <= 0) {
            clearInterval(interval);
            display.textContent = "All done. You’re okay now 🌤️";
          }
        }, 1000);
      }

      function playAudio(audioNumber) {
        const audioFiles = [
          "audio1.mp3", // Add actual audio file paths
          "audio2.mp3",
          "audio3.mp3"
        ];

        const audio = new Audio(audioFiles[audioNumber - 1]);
        audio.play();
      }

      loadLog();
    </script>
  </body>
</html>
